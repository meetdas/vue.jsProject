@using fitnessManagementSystem.App.Models.Dtos;
@model BranchDto;

@{
    ViewData["Title"] = "Branch";
}
<br />
<h1 class="text-info">CREATE NEW BRANCH</h1>

<div id="app">
    <form class="form" v-on:submit.prevent="Save" data-vv-scope="frmModel">

        <div class="p-4 rounded border">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="form-group row">
                <div class="col-2">
                    <label asp-for="Name"></label>
                </div>
                <div class="col-5">
                    <input asp-for="Name" class="form-control" v-model="model.name" />
                </div>
                <span asp-validation-for="Name" class="text-danger"></span>
            </div>

            <div class="form-group">
                <input type="submit" class="btn btn-success" value="Add" />
                <a asp-action="Index" class="btn btn-info">Back To List</a>
            </div>
        </div>

    </form>
</div>
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>
<script src="https://unpkg.com/vee-validate@@<3.0.0"></script>

<script>

    Vue.use(VeeValidate);
    let app = new Vue({
        el: '#app',
        data: {
            model:{
                name:''
            }
        } ,
        mounted: function () {

        },
        computed: {},
        methods: {
            Save: function () {
            var self =  this;
            debugger;
            this.$validator.validateAll("frmModel").then((result) => {
                    if (result) {
                            $.ajax({
                                type: 'Post',
                                url: "/Admin/Branch/Add",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                data: JSON.stringify(this.model),
                                success: function (response) {
                                  console.log(response);
                                        alert('success');
                                        self.model = {
                                            name: ""
                                        }
                                },
                                error: function (error) {
                                      alert(error);
                                }
                            });
                    }
                });
           } // save end
        }// methods end
    })
</script>
